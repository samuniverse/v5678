import{r as e,t}from"./vendor-BrKB-IMX.js";import{r,u as n}from"./react-vendor-CTP5EMOe.js";const s="pushState",o="replaceState",a=["popstate",s,o,"hashchange"],c=e=>{for(const t of a)addEventListener(t,e);return()=>{for(const t of a)removeEventListener(t,e)}},l=(t,r)=>e.useSyncExternalStore(c,t,r),i=()=>location.search,h=()=>location.pathname,u=({ssrPath:e}={})=>l(h,e?()=>e:h),f=(e,{replace:t=!1,state:r=null}={})=>history[t?o:s](r,"",e),p=Symbol.for("wouter_v3");if("undefined"!=typeof history&&void 0===window[p]){for(const e of[s,o]){const t=history[e];history[e]=function(){const r=t.apply(this,arguments),n=new Event(e);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,p,{value:!0})}const d=(e="")=>"/"===e?"":e,m=(e="",t)=>((e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/")(v(d(e)),v(t)),v=e=>{try{return decodeURI(e)}catch(t){return e}},y={hook:(e={})=>[u(e),f],searchHook:({ssrSearch:e=""}={})=>l(i,()=>e),parser:t,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},E=r.createContext(y),b=()=>r.useContext(E),k={},C=r.createContext(k),w=e=>{const[t,r]=e.hook(e);return[m(e.base,t),n((t,n)=>r(((e,t)=>"~"===e[0]?e.slice(1):d(t)+e)(t,e.base),n))]},x=(e,t,r,n)=>{const{pattern:s,keys:o}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",n),a=s.exec(r)||[],[c,...l]=a;return void 0!==c?[!0,(()=>{const e=!1!==o?Object.fromEntries(o.map((e,t)=>[e,l[t]])):a.groups;let t={...l};return e&&Object.assign(t,e),t})(),...n?[c]:[]]:[!1,null]},S=({children:e,...t})=>{var n,s;const o=b(),a=t.hook?y:o;let c=a;const[l,i]=(null==(n=t.ssrPath)?void 0:n.split("?"))??[];i&&(t.ssrSearch=i,t.ssrPath=l),t.hrefs=t.hrefs??(null==(s=t.hook)?void 0:s.hrefs);let h=r.useRef({}),u=h.current,f=u;for(let r in a){const e="base"===r?a[r]+(t[r]||""):t[r]||a[r];u===f&&e!==f[r]&&(h.current=f={...f}),f[r]=e,e!==a[r]&&(c=f)}return r.createElement(E.Provider,{value:c,children:e})},g=({children:e,component:t},n)=>t?r.createElement(t,{params:n}):"function"==typeof e?e(n):e,P=({path:e,nest:t,match:n,...s})=>{const o=b(),[a]=w(o),[c,l,i]=n??x(o.parser,e,a,t),h=(e=>{let t=r.useRef(k),n=t.current;for(const r in e)e[r]!==n[r]&&(n=e);return 0===Object.keys(e).length&&(n=e),t.current=n})({...r.useContext(C),...l});if(!c)return null;const u=i?r.createElement(S,{base:i},g(s,h)):g(s,h);return r.createElement(C.Provider,{value:h,children:u})};r.forwardRef((e,t)=>{const s=b(),[o,a]=w(s),{to:c="",href:l=c,onClick:i,asChild:h,children:u,className:f,replace:p,state:d,...m}=e,v=n(t=>{t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||0!==t.button||(null==i||i(t),t.defaultPrevented||(t.preventDefault(),a(l,e)))}),y=s.hrefs("~"===l[0]?l.slice(1):s.base+l,s);return h&&r.isValidElement(u)?r.cloneElement(u,{onClick:v,href:y}):r.createElement("a",{...m,onClick:v,href:y,className:(null==f?void 0:f.call)?f(o===l):f,children:u,ref:t})});const j=e=>Array.isArray(e)?e.flatMap(e=>j(e&&e.type===r.Fragment?e.props.children:e)):[e],R=({children:e,location:t})=>{const n=b(),[s]=w(n);for(const o of j(e)){let e=0;if(r.isValidElement(o)&&(e=x(n.parser,o.props.path,t||s,o.props.nest))[0])return r.cloneElement(o,{match:e})}return null};export{P as R,R as S};
